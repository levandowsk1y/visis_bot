# visis_bot
у меня заняло много времени по причине того что была проблема с ключами api 
на это ушло бы 3 часа 




Запуск проекта
Проект запускается с помощью Docker но можно и локально.

Создайте файл .env в корне проекта и укажите:
TELEGRAM_TOKEN — токен от BotFather
OPENAI_API_KEY — ваш ключ для доступа к LLM - напишите мне в лс я выдам ключ
Откройте терминал в папке проекта.
Выполните команду:
bash
docker-compose up --build
Бот запустится автоматически и будет готов к работе.
Если нужно запустить без Docker — установите Python 3.11+, зависимости из requirements.txt, и запустите main.py.

Как задать токен Telegram-бота
Напишите @BotFather в Telegram.
Создайте нового бота командой /newbot.
Получите токен вида 1234567890:ABCdefGHIjklMNopQRStuvwxyz123456789.
Вставьте его в файл .env в строку:
TELEGRAM_TOKEN=ваш_токен_здесь
После перезапуска бот начнёт работать.

Архитектура и подход к обработке запросов
Бот принимает вопросы от пользователя на русском языке и превращает их в SQL-запросы к базе данных.

Пользователь пишет:
«Сколько видео у креатора с id ... набрали больше 1000 просмотров?»

Бот передаёт этот вопрос в языковую модель (LLM).

LLM знает:

Структуру базы данных (таблицы videos и video_snapshots)
Как строятся SQL-запросы
Что нужно возвращать только SQL, без пояснений
Модель генерирует SQL-запрос и возвращает его боту.

Бот выполняет запрос в PostgreSQL и получает число.

Это число отправляется пользователю в ответ.

Использование LLM
Для преобразования текста в SQL используется языковая модель (через OpenAI-совместимый API).

Модели передаётся:

Описание структуры таблиц
Примеры вопросов и SQL-запросов
Указание: возвращать только SQL
